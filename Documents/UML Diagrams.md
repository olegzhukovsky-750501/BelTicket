# UML Диаграммы

# Содержание
1. [Диаграмма вариантов использования](#use_case_diagram)  
   1.1 [Актёры](#actors)  
   1.2 [Варианты использования](#use_cases)  
   1.2.1 [Регистрация](#registration)  
   1.2.2 [Сброс пароля](#reset_password)  
   1.2.3 [Вход в учётную запись](#sign_in)  
   1.2.4 [Поиск билетов](#search_tickets)  
   1.2.5 [Редактирование личных данных](#edit_user_data)  
   1.2.6 [Просмотр приобретенных билетов](#view_purchased_tickets)  
   1.2.7 [Выход из учётной записи](#sign_out)  
   1.2.8 [Покупка билетов](#buy_tickets)  
2. [Диаграммы активностей](#activities_diagrams)  
   2.1 [Регистрация](#registration_activity)  
   2.2 [Вход в учётную запись](#sign_in_activity)  
   2.3 [Поиск билетов](#search_tickets_activity)  
   2.4 [Покупка билетов](#buy_tickets_activity)  
3. [Диаграммы последовательностей](#sequence_diagrams)  
   3.1 [Регистрация](#registration_sequence)  
   3.2 [Вход в учётную запись](#sign_in_sequence)  
   3.3 [Поиск билетов](#search_tickets_sequence)  
   3.4 [Покупка билетов](#buy_tickets_sequence)  

<a name="use_case_diagram"/>

# 1. Диаграмма вариантов использования
![Диаграмма вариантов использования](../../Images/Diagrams/UseCaseDiagram.jpg)  

<a name="actors"/>

## 1.1 Актёры
| Актёр | Описание | 
|:---|:---|
| Посетитель | Человек, который зашёл на сайт и не авторизовался в системе. Имеет ограниченный набор действий на сайте.|
| Покупатель | Человек, который авторизовался в системе и имеет доступ ко всему функционалу сайта.|

<a name="use_cases"/>

## 1.2 Варианты использования

<a name ="registration"/>

### 1.2.1 Регистрация
**Описание.** Вариант использования "Регистрация" позволяет посетителю создать свою учётную запись на сайте.  
**Основной поток.**
1. Пользователь нажимает на кнопку "Зарегистрироваться" на главной странице сайта в верхнем правом углу.
2. На сайте отображается окно регистрации, в котором запрашивается ввод имени, фамилии, адреса электронной почты и пароля.
3. Пользователь вводит имя, фамилию, адрес электронной почты и пароль.
4. Пользователь нажимает на кнопку "Создать учетную запись".
5. Веб-приложение проверяет адрес электронной почты на совпадение с другими, на которые зарегистрированы другие пользователи. Если совпадение нашлось, тогда сайт отобразит уведомление об этом и выполнение основного потока переходит к пункту 3.
6. Веб-сайт скрывает окно регистрации.
7. Веб-приложение добавляет в базу данных нового пользователя.
8. Завершение варианта использования.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до нажатия на кнопку создания учётной записи. В случае отмены выполняется альтернативный поток А1.

**Альтернативный поток А1.**  
1.Веб-сайт скрывает окно регистрации.  
2.Завершение варианта использования.

<a name ="reset_password"/>

### 1.2.2 Сброс пароля
**Описание.** Вариант использования "Сброс пароля" позволяет посетителю изменить свой пароль от учётной записи.  
**Основной поток.**
1. Пользователь нажимает на кнопку "Войти" на главной странице веб-сайта в верхнем правом углу.
2. Веб-сайт отображает окно "Войти", в котором имеется кнопка "Я забыл свой пароль".
3. Пользователь нажимает на кнопку "Я забыл свой пароль".
4. Веб-приложение закрывает окно "Войти" и открывает окно "Сброс пароля", в котором запрашивается ввод адреса электронной почты.
5. Пользователь вводит адрес электронной почты и нажимает на кнопку отправить код.
6. Веб-приложение высылает специальный код на указанный пользователем email и открывет окно "Код подтверждения отправлен!", которое запрашивает ввод кода подтверждения и нового пароля.
7. Пользователь вводит код подтверждения и новый пароль.
8. Веб-приложение проверяет введенный пользователем код подтверждения на отправленный ему на адрес электронной почты. Если они не совпадают, тогда выполнение основного потока переходит к пункту 7.
9. Пользователь нажимает на кнопку "Подтвердить и Войти"
10. Веб-приложение закрывает окно "Код подтверждения отправлен!" и открывает окно "Войти"
11. Завершение варианта использования.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до нажатия на кнопку отправления кода. В случае отмены выполняется альтернативный поток А1.

**Альтернативный поток А1.**  
1.Веб-сайт скрывает окно сброса пароля.  
2.Завершение варианта использования.

<a name ="sign_in"/>

### 1.2.3 Вход в учётную запись
**Описание.** Вариант использования "Вход в учётную запись" позволяет посетителю войти в учётную запись.  
**Основной поток.**
1. Пользователь нажимает на кнопку "Войти" на главной странице веб-сайта.
2. Веб-сайт отображает окно "Войти", в котором запрашивается ввод адреса электронной почты и пароля.
3. Пользователь вводит адрес электронной почты и пароль.
4. Пользователь нажимает на кнопку "Войти".
5. Веб-сайт проверяет на наличие адреса электронной почты в базе данных зарегистрированных пользователей в системе и соответствие введеннных адреса электронной почты и пароля. Если такого адреса электронной почты не существует или соответствия адреса электронной почты и пароля, тогда выполнение основного потока переходит к пункту 3.
6. Веб-сайт скрывает окно "Войти" и отображает главную страницу, соответствующую покупателю.
7. Завершение варианта использования.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до нажатия на кнопку входа. В случае отмены выполняется альтернативный поток А1.

**Альтернативный поток А1.**  
1.Веб-сайт скрывает окно входа.  
2.Завершение варианта использования.

<a name ="search_tickets"/>

### 1.2.4 Поиск билетов
**Описание.** Вариант использования "Поиск билетов" позволяет любому пользователю искать билеты на автобусы и отображать информацию о найденных маршрутах.  
**Основной поток.**
1. На главной странице веб-сайта пользователь вводит пункт отправления в поле "Откуда", пункт назначения в поле "Куда", указывает дату в соответствующем поле и выбирает тип билета с помощью выпадающего списка.
2. Пользователь нажимает кнопку "Поиск".
3. Веб-сайт отображает страницу с найденными маршрутами.
4. Завершение варианта использования.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до нажатия на кнопку "Поиск".

<a name ="edit_user_data"/>

### 1.2.5 Редактирование личных данных
**Описание.** Вариант использования "Редактирование личных данных" позволяет покупателю просматривать и изменять данные своей учётной записи.  
**Основной поток.**
1. Пользователь нажимает на область со значком пользователя и с его именем.
2. Веб-приложение отображает список действий, в котором имеется кнопка "Данные пассажира".
3. Пользователь нажимает на данную кнопку.
4. Веб-приложение отображает страницу с данными пользователя, в котором можно редактировать такие данные как: имя, фамилия, номер телефона, номер паспорта и номер платежной карты.
5. Пользователь редактирует некоторые данные.
6. Пользователь нажимает на кнопку "Сохранить"
7. Веб-приложение проверяет валидность измененных данных, в частности: номера паспорта, номера телефона и номера платежной карты. Если измененные данные не валидны, веб-сайт уведомляет об этом и выполнение основного потока переходит к пункту 5.
8. Веб-приложение сохраняет измененные данные в базе данных.
9. Завершение варианта использования.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до нажатия на кнопку "Сохранить".

<a name ="view_purchased_tickets"/>

### 1.2.6 Просмотр приобретенных билетов
**Описание.** Вариант использования "Просмотр приобретенных билетов" позволяет покупателю просмотреть список приобретенных билетов.  
**Основной поток.**
1. Пользователь нажимает на кнопку "Ваши билеты" на главной странице веб-сайта возле имени пользователя и выполнение основного потока переходит к пункту 4 либо пользователь нажимает на область со значком пользователя и с его именем.
2. Веб-приложение отображает список действий, в котором имеется кнопка "Ваши билеты".
3. Пользователь нажимает на данную кнопку.
4. Веб-приложение отображает страницу со списком купленных билетов пользователем.
5. Завершение варианта использования.

<a name ="sign_out"/>

### 1.2.7 Выход из учётной записи
**Описание.** Вариант использования "Выход из учётной записи" позволяет покупателю выйти из своей учётной записи.  
**Основной поток.**
1. Пользователь нажимает на область со значком пользователя и с его именем.
2. Веб-приложение отображает список действий, в котором имеется кнопка "Выход".
3. Пользователь нажимает на данную кнопку.
4. Веб-сайт отображает главную страницу соответствующую посетителю.
5. Завершение варианта использования.

<a name ="purchase_tickets"/>

### 1.2.8 Покупка билетов
**Описание.** Вариант использования "Покупка билетов" позволяет покупателю приобрести билет для поездки на автобусе.  
**Предусловия.** Был инициирован вариант использования "Поиск билетов".  
**Основной поток.**
1. Пользователь нажимает на область с найденным билетом на автобус.
2. Веб-приложение отображает страницу с покупкой билета, в которой имеются поля для ввода данных покупки и таблица для выбора места в автобусе.
3. Пользователь заполняет незаполненные поля и выбирает место в автобусе.
4. Пользователь нажимает на кнопку "Оплатить".
5. Веб-приложение проверяет валидность введенных данных. Если введенные данные не валидны, веб-сайт уведомляет об этом и выполнение основного потока переходит к пункту 4.
6. Веб-приложение сохраняет билет в базе данных.
7. Завершение варианта использования.


<a name = "activities_diagrams"/>

## 2. Диаграммы активности

<a name = "registration_activity"/>

### 2.1 Регистрация

![Диаграмма активности (регистрация)](../../Images/Diagrams/RegistrationDiagram.jpg)  

<a name = "sign_in_activity"/>

### 2.2 Вход в учётную запись

![Диаграмма активности (вход в учётную запись)](../../Images/Diagrams/SignInDiagram.jpg)  

<a name = "search_tickets_activity"/>

### 2.3 Поиск билетов

![Диаграмма активности (поиск билетов)](../../Images/Diagrams/SearchTicketsDiagram.jpg)

<a name = "buy_tickets_activity"/>

### 2.4 Покупка билетов

![Диаграмма активности (покупка билетов)](../../Images/Diagrams/BuyTicketsDiagram.jpg)

<a name = "sequence_diagrams"/>

## 3. Диаграммы последовательностей

<a name = "registration_sequence"/>

### 2.1 Регистрация

![Диаграмма последовательности (регистрация)](../../Images/Diagrams/RegistrationSeqDiagram.jpg)  

<a name = "sign_in_sequence"/>

### 2.2 Вход в учётную запись

![Диаграмма последовательности (вход в учётную запись)](../../Images/Diagrams/SignInSeqDiagram.jpg)  

<a name = "search_tickets_sequence"/>

### 2.3 Поиск билетов

![Диаграмма последовательности (поиск билетов)](../../Images/Diagrams/SearchTicketsSeqDiagram.jpg)

<a name = "buy_tickets_sequeunce"/>

### 2.4 Покупка билетов

![Диаграмма последовательности (покупка билетов)](../../Images/Diagrams/BuyTicketsSeqDiagram.jpg)





